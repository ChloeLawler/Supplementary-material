#!/bin/bash

#PBS -j oe
#PBS -l nodes=1:ppn=8
#PBS -l mem=30gb
#PBS -l walltime=16:00:00
#PBS -M Lawler.chloe@gmail.com
#PBS -m ae
#PBS -J 1-11

BIN_DIR=/srv/scratch/z5255670/NCBIfiles/references

cd ${BIN_DIR}

module add perl/5.28.0
module add hmmer/3.2.1
module add prodigal/2.6.3
module add pplacer/1.1.alpha19
module add raxml/8.2.12
module add fasttree/2.1.10
module add phylosift/1.0.1

BINS=( "0""Vulcanisaetamoutnovskia768-28.faa""VulcanisaetadistributaDSM14429.faa""ThermosphaeraaggregansDSM11486.faa""Thermoproteusuzoniensis768-20.faa""Thermoproteusuzoniensi.faa" "Thermogladiuscalderae1633.faa""ThermofilumpendensHrk5.faa" "Thermofilumadornatus1505.faa" "Thermofilumadornatum.faa" "Thermococcusthioreducens.faa" "Thermococcussp.P6.faa" "Thermococcussp.IOH2.faa" "ThermococcussibiricusMM739.faa" "Thermococcusradiotolerans.faa" "Thermococcusprofundus.faa" "Thermococcuspiezophilus.faa" "Thermococcuspeptonophilus.faa" "Thermococcusparalvinellae.faa" "ThermococcusonnurineusNA1.faa""Thermococcusnautili.faa" "ThermococcuslitoralisDSM5473.faa" "Thermococcusindicus.faa" "Thermococcushenrietii.faa" "Thermococcusguaymasensis.faa""Thermococcusgorgonarius.faa" "Thermococcusgammatolerans.faa" "Thermococcuseurythermalis.faa" "Thermococcuscleftensis.faa" "Thermococcuscamini.faa" "Thermococcusbarossii.faa" "Thermococcusaciditolerans.faa" "Thermococcus pacificus.faa" "Thermococcus kodakarensis.faa" "Sulfurisphaeratokodaiistr.7.faa" "Sulfurisphaeraohwakuensis.faa" "Sulfuracidifextepidarius.faa" "SulfolobusislandicusY.N.15.51.faa" "SulfolobusislandicusM.16.4.faa" "Sulfolobusislandicus.faa" "SulfolobusacidocaldariusN8.faa" "Sulfolobusacidocaldarius.faa" "Sulfolobus.faa" "Sulfolobalesarchaeon.faa" "Sulfodiicoccusacidiphilus.faa" "Stygiolobus azoricus.faa" "Staphylothermusmarinus.faa" "Staphylothermushellenicus.faa" "Saliphagussp.faa" "Salinigranum rubrum.faa" "Salinarchaeumsp.Harcht-Bsk1.faa" "Salinarchaeumsp.faa" "Salarchaeumsp.JOR-1.faa" "Salarchaeumjaponicum.faa" "Saccharolobussolfataricus.faa" "SaccharolobusshibataeB12.faa" "Saccharolobuscaldissimus.faa" "Pyrolobusfumarii1A.faa" "Pyrodictiumdelaneyi.faa" "PyrococcusyayanosiiCH1.faa" "Pyrococcussp.ST04.faa" "Pyrococcuskukulkanii.faa" "PyrococcushorikoshiiOT3.faa" "PyrococcusfuriosusDSM3638.faa" "PyrococcusfuriosusCOM1.faa" "Pyrobaculumferrireducens.faa" "PyrobaculumcalidifontisJCM11548.faa" "PyrobaculumarsenaticumDSM13514.faa" "Pyrobaculumaerophilumstr.IM2.faa" "Palaeococcuspacificus.faa" "Nitrososphaeraviennensis.faa" "Nitrosopumilusureiphilus.faa""Nitrosopumilussp.faa" "Nitrosopumiluspiranensis.faa" "Nitrosopumilusoxyclinae.faa" "Nitrosopumilusmaritimus.faa" "Nitrosopumiluscobalaminigenes.faa" "Nitrosopumilusadriaticus.faa" "Nitrosarchaeumsp.faa" "Natronorubrumbangense.faa" "Natronorubrumaibiense.faa" "Natronomonassp.faa" "Natronomonassalina.faa" "Natronomonaspharaonis.faa" "Natronomonasmoolapensis8.8.11.faa" "Natronomonasgomsonensis.faa" "Natronomonas halophila.faa" "NatronococcusoccultusSP4.faa" "Natrinemaversiforme.faa" "Natrinemathermotolerans.faa" "Natrinemathermotoleran.faa" "Natrinemasp.faa" "Natrinemasp.DC36.faa" "Natrinemasalinisoli.faa" "NatrinemapellirubrumDSM15624.faa" "Natrinemapallidum.faa" "Natrinema halophilum.faa" "Natribaculumlongum.faa" "NatrialbamagadiiATCC43099.faa" "Natrialbaceaearchaeon.faa" "Natrarchaeobaculum" "Sulfurireducens.faa" "Natrarchaeobaculumaegyptiacum.faa" "Natranaeroarchaeum" "Sulfidigenum.faa" "Nanohaloarchaeaarchaeon.faa" "NanoarchaeumequitansKin4-M.faa" "Nanoarchaeotaarchaeon MJ1.faa" "MethanotorrisigneusKol5.faa" "MethanothrixthermoacetophilaPT.faa" "MethanothrixsoehngeniiGP6.faa" "MethanothermusfervidusDSM2088.faa" "Methanothermobacterthermautotrophicusstr.Delta H.faa" "Methanothermobactersp.THM-2.faa" "Methanothermobactermarburgensisstr.Marburg.faa" "MethanosphaerulapalustrisE1-9c.faa" "MethanosphaerastadtmanaeDSM3091.faa" "Methanosphaerastadtmanae.faa" "Methanosphaerasp.BMS.faa" "MethanosarcinavacuolataZ-761.faa" "MethanosarcinathermophilaCHTI-55.faa" "Methanosarcinathermophila.faa" "Methanosarcinasp.WWM596.faa" "Methanosarcinasp.MTP4.faa" "MethanosarcinamazeiWWM610.faa" "MethanosarcinalacustrisZ-7289.faa" "Methanosarcina siciliaeT4M.faa" "Methanosaetaharundinacea6Ac.faa" "Methanoregulaboonei6A8.faa" "Methanoplanusendosymbiosus.faa" "Methanomethylovoranshollandica.faa" "Methanohalophilusmahii.faa" "Methanohalophilushalophilus.faa" "Methanohalobiumevestigatum.faa" "MethanoculleusmarisnigriJR1.faa" "MethanococcusmaripaludisX1.faa" "Methanocellapaludicola.faa" "Methanocellaarvoryzae.faa" "Methanocaldococcussp.faa" "Methanocaldococcusfervens.faa" "Methanobrevibacterarboriphilus.faa" "Methanobacteriumsubterraneum.faa" "Methanobacteriumlacus.faa" "Methanobacteriumformicicum.faa" "Metallosphaeratengchongensis.faa" "Metallosphaerasp.faa" "Metallosphaerasedula.faa" "Metallosphaeraprunae.faa" "Metallosphaerajavensis.faa" "Infirmifilumuzonense.faa" "Infirmifilumlucidum.faa" "IgnisphaeraaggregansDSM17230.faa" "Ignicoccusislandicus.faa" "Ignicoccushospitalis.faa" "Hyperthermusbutylicus.faa" "Halovivaxsp.faa" "Halovivaxcerinus.faa" "Haloterrigenasp.faa" "Haloterrigenalonga.faa" "HalostagnicolalarseniiXH-48.faa" "Halosimplexrubrum.faa" "Halosimplexpelagicum.faa""Halosiccatusurmianus.faa""Halorussussp.faa" "Halorussuspelagicus.faa" "Halorussushalophilus.faa" "Halorubrumsodomense.faa" "Halorubrumsalinarum.faa" "Halorubrums.faa" "HalorubrumlacusprofundiATCC49239.faa" "Halorientalismarina.faa" "Halorhabdusutahensis.faa" "Haloquadratumwalsbyi.faa" "Haloprofundussp.Gai1-5.faa" "Haloprofundus.faa" "Haloplanussalinarum.faa" "Haloplanusrallus.faa" "Haloplanusaerogenes.faa" "Halopigerxanaduensis.faa" "halophilicarchaeon.faa" "Halopenituspersicus.faa" "Halomicrobium.faa" "Halolamina.faa" "Halogeometricumborinquense.faa" "Haloferaxvolcanii.faa" "Halode" "Sulfurarchaeumformicicum1.faa" "Halode" "Sulfurarchaeumformicicum.faa" "Halococcusdombrowskii.faa" "Halococcoides cellulosivorans.faa" "Halobiformalacisalsi.faa" "Halobellusramosii.faa" "Halobaculumroseum.faa" "Halobaculumhalophilum.faa" "Halobaculum.faa" "Halobacteriumsp.XZYJT26.faa" "HalobacteriumsalinarumR1.faa" "Halobacteriumsalinarum.faa" "Halobacteriumnoricense.faa" "Halobacteriumnoricens.faa" "Halobacteriumhubeiense.faa" "Halobacterium.faa" "Halobacterium sp. GSL-19.faa" "Halobacterium salinarum.faa" "Haloarculataiwanensis.faa" "Haloarculasinaiiensis.faa" "Haloarculahispanica.faa" "Haloarcula.faa" "Haloarcula marismortui.faa" "haloarchaeon 3A1-DGR.faa" "Halarchaeum.faa" "Halapricumsalinum.faa" "Halapricumde" "Sulfuricans.faa" "Halanaeroarchaeum" "Sulfurireducens.faa" "Halalkalicoccusjeotgali.faa" "Halalkaliarchaeum desulfuricum.faa" "Haladaptatuspallidirubidus.faa" "Haladaptatus.faa" "Geoglobusahangari.faa" "Fervidicoccusfontis.faa" "Ferroglobus placidus.faa" "Desulfurococcusmucosus.faa" "Desulfurococcusamylolyticus.faa" "Conexivisphaeracalida.faa" "CandidatusPrometheoarchaeumsyntrophicum.faa" "CandidatusNitrosotenuissp.faa" "CandidatusNitrosopumiluskoreensis.faa" "CandidatusNitrosopumilus.faa" "CandidatusNitrosopelagicusbrevis.faa" "CandidatusNitrosomarinuscatalina.faa" "CandidatusNitrosocosmicusfranklandus.faa" "CandidatusNitrosocaldusislandicus.faa" "CandidatusNanohalobiumconstans.faa" "CandidatusMicrarchaeum.faa" "CandidatusMancarchaeumacidiphilum.faa" "CandidatusKorarchaeumcryptofilum.faa" "CandidatusCaldarchaeumsubterraneum.faa" "Candidatus Nitrosocosmicus oleophilus.faa" "CaldivirgamaquilingensisIC-167.faa" "CaldisphaeralagunensisDSM15908.faa" "archaeonGW2011_AR20.faa" "archaeonGW2011_AR10.faa" "ArchaeoglobusSulfaticallidus.faa" "Archaeoglobusprofundus.faa" "Archaeoglobusfulgidus.faa" "Archaeoglobus veneficus.faa" "Archaeoglobus fulgidus.faa" "AeropyrumpernixK1.faa" "Aeropyrum camini.faa" "Acidilobussp.faa" "Acidilobussaccharovorans.faa" "Acidianussulfidivorans.faa" "Acidianushospitalis.faa" "Acidianusbrierleyi.faa" "Acidianusambivalens.faa" "Acidianus manzaensis.faa")
sleep $(($RANDOM % 240))

((START_NUMBER = (${PBS_ARRAY_INDEX} - 1 ) * 2 + 1))
((END_NUMBER = ${START_NUMBER} + 1))

	for i in `(seq $START_NUMBER $END_NUMBER)`
	do
	phylosift all --keep_search --output ${BINS[i]%.fasta}.1 ${BINS[i]} --debug
	done